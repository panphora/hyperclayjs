<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HyperclayJS API Reference</title>
  <style>
    @font-face {
      font-family: 'Berkeley Mono';
      src: url('./assets/BerkeleyMonoVariable-Regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    :root {
      --primary-blue: #d79921;
      --shadow-blue: rgba(215, 153, 33, 0.06);
      --border-blue: #d79921;
      --bg-dark: #080808;
      --bg-card: #0e0e0e;
      --text-primary: #ffffff;
      --text-secondary: #c8bca4;
      --code-bg: rgba(215, 153, 33, 0.1);
      --sidebar-width: 240px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Berkeley Mono', monospace;
      line-height: 1.6;
      color: var(--text-primary);
      background-color: var(--bg-dark);
      margin: 0;
      padding: 0;
      min-width: 320px;
    }

    .top-nav {
      border-bottom: 1px solid var(--border-blue);
      padding: 1.5rem;
    }

    .top-nav-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
    }

    .top-nav h1 {
      font-size: 2.5rem;
      font-weight: 900;
      margin: 0;
      color: var(--text-primary);
    }

    .nav-links {
      display: flex;
      gap: 1rem;
    }

    .nav-link {
      font-weight: bold;
      color: var(--text-primary);
      text-decoration: none;
      border: 2px solid var(--primary-blue);
      padding: 0.5rem 1rem;
      background: var(--bg-card);
      box-shadow: 4px 4px 0 var(--shadow-blue);
      white-space: nowrap;
    }

    .nav-link:hover {
      background: var(--shadow-blue);
    }

    .nav-link.active {
      background: var(--primary-blue);
      color: var(--bg-dark);
    }

    .nav-link-icon {
      padding: 0.5rem;
      display: flex;
      align-items: center;
    }

    .nav-link-icon svg {
      display: block;
    }

    .container {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
    }

    .sidebar-col {
      width: var(--sidebar-width);
      flex-shrink: 0;
    }

    .sidebar {
      width: var(--sidebar-width);
      background-color: var(--bg-card);
      border-right: 1px solid var(--border-blue);
      padding: 20px;
      overflow-y: auto;
    }

    .sidebar.is-stuck {
      position: fixed;
      top: 0;
    }

    /* Mobile menu button */
    .menu-btn {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 200;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: var(--primary-blue);
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      align-items: center;
      justify-content: center;
    }

    .menu-btn svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .menu-btn:hover {
      background-color: #7A83C6;
    }

    /* Sidebar overlay for mobile */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 299;
    }

    .sidebar-close {
      display: none;
      position: absolute;
      top: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: 24px;
      cursor: pointer;
      border-radius: 4px;
    }

    .sidebar-close:hover {
      background-color: var(--shadow-blue);
      color: var(--text-primary);
    }

    .sidebar h2 {
      font-size: 14px;
      color: var(--primary-blue);
      margin: 0 0 16px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-blue);
    }

    .sidebar-section {
      margin-bottom: 20px;
    }

    .sidebar-section h3 {
      font-size: 12px;
      color: var(--text-secondary);
      margin: 0 0 8px 0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .sidebar-section a {
      display: block;
      color: var(--text-primary);
      text-decoration: none;
      padding: 4px 8px;
      margin: 2px 0;
      border-radius: 4px;
      font-size: 13px;
    }

    .sidebar-section a:hover {
      background-color: var(--shadow-blue);
    }

    .content {
      flex: 1;
      padding: 40px;
      max-width: 1100px;
      min-width: 0;
    }

    .content h1 {
      font-size: 28px;
      margin: 0 0 8px 0;
      color: var(--text-primary);
    }

    .content > p:first-of-type {
      color: var(--text-secondary);
      margin-bottom: 40px;
    }

    .category-section {
      margin-bottom: 60px;
    }

    .category-section h2 {
      font-size: 20px;
      color: var(--primary-blue);
      margin: 0 0 24px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-blue);
    }

    .function-card {
      background-color: var(--bg-card);
      border: 1px solid var(--border-blue);
      box-shadow: 4px 4px 0 var(--shadow-blue);
      padding: 24px;
      margin-bottom: 24px;
      overflow: hidden;
    }

    .function-card h3 {
      font-size: 18px;
      margin: 0 0 4px 0;
      color: var(--text-primary);
      word-break: break-word;
    }

    .function-description {
      color: var(--text-secondary);
      margin: 0 0 16px 0;
    }

    .exports {
      display: inline-block;
      background-color: var(--code-bg);
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 12px;
      color: var(--primary-blue);
      margin-bottom: 16px;
      word-break: break-all;
    }

    .signature {
      background-color: var(--code-bg);
      border-left: 3px solid var(--primary-blue);
      padding: 12px 16px;
      margin: 16px 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .signature code {
      color: var(--text-primary);
      white-space: pre;
      display: block;
    }

    .function-card h4 {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 20px 0 8px 0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .params-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      display: block;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .params-table tbody,
    .params-table tr {
      display: table;
      width: 100%;
      table-layout: fixed;
    }

    .params-table th {
      text-align: left;
      color: var(--text-secondary);
      font-weight: normal;
      padding: 8px;
      border-bottom: 1px solid var(--border-blue);
    }

    .params-table td {
      padding: 8px;
      border-bottom: 1px solid rgba(215, 153, 33, 0.06);
      vertical-align: top;
      word-break: break-word;
    }

    .params-table code {
      background-color: var(--code-bg);
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 12px;
      word-break: break-all;
    }

    .returns-type {
      background-color: var(--code-bg);
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
    }

    .example {
      background-color: var(--code-bg);
      border-left: 3px solid var(--primary-blue);
      padding: 16px;
      margin: 16px 0 0 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .example pre {
      margin: 0;
      color: var(--text-primary);
      font-size: 13px;
      line-height: 1.5;
      white-space: pre;
    }

    /* Mobile styles */
    @media (max-width: 768px) {
      .top-nav {
        padding: 1rem;
      }

      .top-nav-inner {
        flex-wrap: wrap;
        gap: 0.75rem;
      }

      .top-nav h1 {
        font-size: 1.5rem;
      }

      .nav-links {
        gap: 0.5rem;
      }

      .nav-link {
        padding: 0.35rem 0.65rem;
        font-size: 12px;
      }

      .menu-btn {
        display: flex;
      }

      .sidebar-col {
        display: none;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        max-height: 100vh !important;
        z-index: 300;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .sidebar-close {
        display: block;
      }

      .sidebar-overlay.open {
        display: block;
      }

      .content {
        padding: 20px;
        padding-bottom: 80px;
      }

      .content h1 {
        font-size: 24px;
      }

      .function-card {
        padding: 16px;
        box-shadow: 2px 2px 0 var(--shadow-blue);
      }

      .function-card h3 {
        font-size: 16px;
      }

      .params-table {
        font-size: 12px;
      }

      .params-table th,
      .params-table td {
        padding: 6px;
      }
    }

    @media (max-width: 480px) {
      .content {
        padding: 16px;
        padding-bottom: 80px;
      }

      .content h1 {
        font-size: 20px;
      }

      .category-section h2 {
        font-size: 18px;
      }

      .function-card {
        padding: 12px;
      }

      .signature {
        padding: 10px 12px;
        font-size: 12px;
      }

      .example {
        padding: 12px;
        font-size: 12px;
      }

      .example pre {
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="top-nav">
    <div class="top-nav-inner">
    <h1>HyperclayJS</h1>
    <div class="nav-links">
      <a href="index.html" class="nav-link">Home</a>
      <a href="docs.html" class="nav-link active">Docs</a>
      <a href="config.html" class="nav-link">Use HyperclayJS</a>
      <a href="https://github.com/panphora/hyperclayjs" class="nav-link nav-link-icon" target="_blank" rel="noopener" title="GitHub">
        <svg width="20" height="20" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"/></svg>
      </a>
    </div>
    </div>
  </div>
  <button class="menu-btn" onclick="toggleSidebar()" aria-label="Open menu">
    <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
  </button>
  <div class="sidebar-overlay" onclick="closeSidebar()"></div>
  <div class="container">
    <div class="sidebar-col">
      <div class="sidebar">
        <button class="sidebar-close" onclick="closeSidebar()" aria-label="Close menu">&times;</button>
        <h2>API Reference</h2><div class="sidebar-section">
      <h3>UI Components</h3><a href="#fn-toast">toast</a><a href="#fn-ask">ask</a><a href="#fn-consent">consent</a><a href="#fn-tell">tell</a><a href="#fn-snippet">snippet</a><a href="#fn-themodal">themodal</a></div><div class="sidebar-section">
      <h3>DOM Utilities</h3><a href="#fn-All">All</a><a href="#fn-insertStyles">insertStyles</a><a href="#fn-getDataFromForm">getDataFromForm</a><a href="#fn-onDomReady">onDomReady</a><a href="#fn-onLoad">onLoad</a><a href="#fn-dom-helpers">dom-helpers</a></div><div class="sidebar-section">
      <h3>String Utilities</h3><a href="#fn-slugify">slugify</a><a href="#fn-copyToClipboard">copyToClipboard</a><a href="#fn-query">query</a></div><div class="sidebar-section">
      <h3>Utilities</h3><a href="#fn-throttle">throttle</a><a href="#fn-debounce">debounce</a><a href="#fn-cacheBust">cacheBust</a><a href="#fn-cookie">cookie</a><a href="#fn-Mutation">Mutation</a><a href="#fn-nearest">nearest</a></div><div class="sidebar-section">
      <h3>Communication</h3><a href="#fn-sendMessage">sendMessage</a><a href="#fn-uploadFile">uploadFile</a><a href="#fn-createFile">createFile</a><a href="#fn-uploadFileBasic">uploadFileBasic</a><a href="#fn-live-sync">live-sync</a></div><div class="sidebar-section">
      <h3>Event Attributes</h3><a href="#fn-onclickaway">onclickaway</a><a href="#fn-onclickchildren">onclickchildren</a><a href="#fn-onclone">onclone</a><a href="#fn-onmutation">onmutation</a><a href="#fn-onpagemutation">onpagemutation</a><a href="#fn-onrender">onrender</a></div><div class="sidebar-section">
      <h3>Custom Attributes</h3><a href="#fn-persist">persist</a><a href="#fn-onaftersave">onaftersave</a><a href="#fn-prevent-enter">prevent-enter</a><a href="#fn-autosize">autosize</a><a href="#fn-sortable">sortable</a><a href="#fn-option-visibility">option-visibility</a></div><div class="sidebar-section">
      <h3>Save/Edit Features</h3><a href="#fn-edit-mode">edit-mode</a><a href="#fn-edit-mode-helpers">edit-mode-helpers</a><a href="#fn-save-system">save-system</a><a href="#fn-save-toast">save-toast</a><a href="#fn-unsaved-warning">unsaved-warning</a><a href="#fn-autosave">autosave</a><a href="#fn-tailwind-inject">tailwind-inject</a></div>
      </div>
    </div>
    <main class="content">
      <h1>API Reference</h1>
      <p>Documentation for all exported functions and utilities.</p>
      <div class="category-section" id="cat-ui">
      <h2>UI Components</h2><div class="function-card" id="fn-toast">
    <h3>toast</h3>
    <p class="function-description">Display a toast notification for success or error messages.</p>
    <div class="exports">Available as: <code>window.toast</code>, <code>hyperclay.toast</code></div>
    <div class="signature"><code>toast(message, messageType)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>message</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The message to display</td>
        </tr>
      
        <tr>
          <td><code>messageType</code></td>
          <td><code>string</code></td>
          <td><code>`'success'`</code></td>
          <td>Either `'success'` or `'error'`</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">void</code></p>
    <h4>Example</h4><div class="example"><pre>// Show a success message
toast('Changes saved!', 'success');

// Show an error message
toast('Something went wrong', 'error');

// Success is the default type
toast('Uploaded successfully');</pre></div>
  </div><div class="function-card" id="fn-ask">
    <h3>ask</h3>
    <p class="function-description">Display a modal with an input field to prompt the user for text input.</p>
    <div class="exports">Available as: <code>window.ask</code>, <code>hyperclay.ask</code></div>
    <div class="signature"><code>ask(promptText, yesCallback, defaultValue, extraContent)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>promptText</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The question or prompt to display</td>
        </tr>
      
        <tr>
          <td><code>yesCallback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Called with the input value when user confirms</td>
        </tr>
      
        <tr>
          <td><code>defaultValue</code></td>
          <td><code>string</code></td>
          <td><code>`''`</code></td>
          <td>Pre-filled value in the input field</td>
        </tr>
      
        <tr>
          <td><code>extraContent</code></td>
          <td><code>string</code></td>
          <td><code>`''`</code></td>
          <td>Additional HTML content to display below the input</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;string&gt;</code> — Resolves with the input value, rejects if user closes modal</p>
    <h4>Example</h4><div class="example"><pre>// Basic usage with async/await
const name = await ask('What is your name?');
console.log('Hello, ' + name);

// With a default value
const title = await ask('Enter title:', null, 'Untitled');

// With callback
ask('Enter your email:', (email) =&gt; {
  console.log('Email:', email);
});

// With extra content
ask('Confirm action:', null, '', '&lt;p class=&quot;warning&quot;&gt;This cannot be undone&lt;/p&gt;');</pre></div>
  </div><div class="function-card" id="fn-consent">
    <h3>consent</h3>
    <p class="function-description">Display a confirmation modal to get user consent before an action.</p>
    <div class="exports">Available as: <code>window.consent</code>, <code>hyperclay.consent</code></div>
    <div class="signature"><code>consent(promptText, yesCallback, extraContent)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>promptText</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The question or prompt to display</td>
        </tr>
      
        <tr>
          <td><code>yesCallback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Called when user confirms</td>
        </tr>
      
        <tr>
          <td><code>extraContent</code></td>
          <td><code>string</code></td>
          <td><code>`''`</code></td>
          <td>Additional HTML content to display</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;void&gt;</code> — Resolves when user confirms, rejects if user closes modal</p>
    <h4>Example</h4><div class="example"><pre>// Basic usage with async/await
try {
  await consent('Delete this item?');
  deleteItem();
} catch (e) {
  // User cancelled
}

// With callback
consent('Are you sure?', () =&gt; {
  performAction();
});

// With extra content
consent('Publish changes?', null, '&lt;p&gt;This will be visible to all users.&lt;/p&gt;');</pre></div>
  </div><div class="function-card" id="fn-tell">
    <h3>tell</h3>
    <p class="function-description">Display an informational modal with a title and optional content paragraphs.</p>
    <div class="exports">Available as: <code>window.tell</code>, <code>hyperclay.tell</code></div>
    <div class="signature"><code>tell(promptText, ...content)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>promptText</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The title/heading text</td>
        </tr>
      
        <tr>
          <td><code>...content</code></td>
          <td><code>string[]</code></td>
          <td>—</td>
          <td>Additional content paragraphs (variadic)</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;void&gt;</code> — Resolves when user confirms, rejects on close</p>
    <h4>Example</h4><div class="example"><pre>// Simple message
await tell('Welcome!');

// With additional content
await tell(
  'About This App',
  'This is a collaborative editing platform.',
  'Changes are saved automatically.',
  'Press CMD+S to save manually.'
);

// Informational popup
tell('Tip', 'You can drag and drop items to reorder them.');</pre></div>
  </div><div class="function-card" id="fn-snippet">
    <h3>snippet</h3>
    <p class="function-description">Display a modal with a code snippet and a copy-to-clipboard button.</p>
    <div class="exports">Available as: <code>window.snippet</code>, <code>hyperclay.snippet</code></div>
    <div class="signature"><code>snippet(title, content, extraContent)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>title</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The modal heading</td>
        </tr>
      
        <tr>
          <td><code>content</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The code/text to display and copy</td>
        </tr>
      
        <tr>
          <td><code>extraContent</code></td>
          <td><code>string</code></td>
          <td><code>`''`</code></td>
          <td>Optional warning or info text below the copy button</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;void&gt;</code> — Resolves when modal is closed</p>
    <h4>Example</h4><div class="example"><pre>// Show embed code
snippet('Embed Code', '&lt;iframe src=&quot;https://example.com&quot;&gt;&lt;/iframe&gt;');

// With a warning message
snippet(
  'API Key',
  'sk-1234567890abcdef',
  'Keep this key secret. Do not share it publicly.'
);

// Show configuration
const config = JSON.stringify({ theme: 'dark', lang: 'en' }, null, 2);
snippet('Your Settings', config);</pre></div>
  </div><div class="function-card" id="fn-themodal">
    <h3>themodal</h3>
    <p class="function-description">A flexible modal window creation system. Configure and display custom modals with full control over content and behavior.</p>
    <div class="exports">Available as: <code>window.themodal</code>, <code>hyperclay.themodal</code></div>
    <div class="signature"><code>themodal.html = content;
themodal.yes = buttonContent;
themodal.no = buttonContent;
themodal.open();
themodal.close();</code></div>
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>open()</code></td>
          <td>Show the modal</td>
        </tr>
      
        <tr>
          <td><code>close()</code></td>
          <td>Close the modal (triggers onNo callbacks)</td>
        </tr>
      
        <tr>
          <td><code>onYes(callback)</code></td>
          <td>Add callback for confirm action. Return `false` to prevent closing</td>
        </tr>
      
        <tr>
          <td><code>onNo(callback)</code></td>
          <td>Add callback for cancel/close action</td>
        </tr>
      
        <tr>
          <td><code>onOpen(callback)</code></td>
          <td>Add callback for when modal opens</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Basic custom modal
themodal.html = '&lt;h2&gt;Custom Title&lt;/h2&gt;&lt;p&gt;Your content here&lt;/p&gt;';
themodal.yes = 'Confirm';
themodal.no = 'Cancel';

themodal.onYes(() =&gt; {
  console.log('User confirmed');
});

themodal.onNo(() =&gt; {
  console.log('User cancelled');
});

themodal.open();

// Modal with form validation
themodal.html = '&lt;input class=&quot;micromodal__input&quot; type=&quot;email&quot; required&gt;';
themodal.yes = 'Submit';

themodal.onYes(() =&gt; {
  const email = document.querySelector('.micromodal__input').value;
  if (!email.includes('@')) {
    toast('Invalid email', 'error');
    return false; // Prevent modal from closing
  }
  processEmail(email);
});

themodal.open();</pre></div>
  </div></div><div class="category-section" id="cat-dom">
      <h2>DOM Utilities</h2><div class="function-card" id="fn-All">
    <h3>All</h3>
    <p class="function-description">A lightweight DOM manipulation library with jQuery-like syntax. Select elements, chain methods, handle events with delegation, and more.</p>
    <div class="exports">Available as: <code>window.All</code>, <code>hyperclay.All</code></div>
    <div class="signature"><code>All(selector)
All(selector, context)
All(element)
All(elements)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>selector</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>CSS selector to match elements</td>
        </tr>
      
        <tr>
          <td><code>context</code></td>
          <td><code>string | Element | Element[] | Document</code></td>
          <td>—</td>
          <td>Optional context to limit search scope</td>
        </tr>
      
        <tr>
          <td><code>element</code></td>
          <td><code>Element</code></td>
          <td>—</td>
          <td>Wrap a single DOM element</td>
        </tr>
      
        <tr>
          <td><code>elements</code></td>
          <td><code>Element[]</code></td>
          <td>—</td>
          <td>Wrap an array of DOM elements</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Proxy&lt;Element[]&gt;</code> — A proxied array of elements with chainable methods</p>
    <h4>Example</h4><div class="example"><pre>// Toggle visibility on all cards
All('.card').classList.toggle('hidden');

// Get values from all inputs
const values = All('input').map(el =&gt; el.value);

// Event delegation for dynamic content
All(document).onclick('.dynamic-btn', function() {
  console.log('Button clicked:', this.dataset.id);
});

// Chained operations
All('.notification')
  .classList.add('fade-out')
  .style.opacity = '0';

// Iterate with for...of
for (const el of All('.item')) {
  el.textContent = 'Updated';
}</pre></div>
  </div><div class="function-card" id="fn-insertStyles">
    <h3>insertStyles</h3>
    <p class="function-description">Insert styles into the document — either an external stylesheet or inline CSS. With a persistent DOM (hyperclay), new styles are inserted first, then duplicates are removed to prevent flickering.</p>
    <div class="exports">Available as: <code>window.insertStyles</code>, <code>hyperclay.insertStyles</code></div>
    <div class="signature"><code>insertStyles(href)
insertStyles(name, css)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>href</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>URL of the stylesheet to inject (1-arg form)</td>
        </tr>
      
        <tr>
          <td><code>name</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>Unique name for inline styles, used as data-name attribute (2-arg form)</td>
        </tr>
      
        <tr>
          <td><code>css</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>CSS content to inject inline (2-arg form)</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">HTMLElement</code></p>
    <h4>Example</h4><div class="example"><pre>// External stylesheet
insertStyles('/styles/theme.css');

// Load from CDN
insertStyles('https://cdn.example.com/lib.css');

// Inline CSS with a name (for deduplication)
insertStyles('my-theme', `
  .dark-mode { background: #1a1a1a; color: #fff; }
`);

// Safe to call multiple times - old duplicates are removed
insertStyles('/styles/theme.css'); // Replaces previous</pre></div>
  </div><div class="function-card" id="fn-getDataFromForm">
    <h3>getDataFromForm</h3>
    <p class="function-description">Extract all form field values as a plain JavaScript object. Works with `&lt;form&gt;` elements or any container with named inputs.</p>
    <div class="exports">Available as: <code>window.getDataFromForm</code>, <code>hyperclay.getDataFromForm</code></div>
    <div class="signature"><code>getDataFromForm(container)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>container</code></td>
          <td><code>HTMLFormElement|Element</code></td>
          <td>—</td>
          <td>Form element or container with named inputs</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">object</code> — Key-value pairs of field names and their values</p>
    <h4>Example</h4><div class="example"><pre>// From a form element
const form = document.querySelector('form');
const data = getDataFromForm(form);
// { username: 'john', email: 'john@example.com' }

// From any container
const container = document.querySelector('.filter-panel');
const filters = getDataFromForm(container);

// Checkbox handling
// &lt;input type=&quot;checkbox&quot; name=&quot;tags&quot; value=&quot;js&quot; checked&gt;
// &lt;input type=&quot;checkbox&quot; name=&quot;tags&quot; value=&quot;css&quot; checked&gt;
// Result: { tags: ['js', 'css'] }

// Use with fetch
const formData = getDataFromForm(form);
fetch('/api/submit', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(formData)
});</pre></div>
  </div><div class="function-card" id="fn-onDomReady">
    <h3>onDomReady</h3>
    <p class="function-description">Execute a callback when the DOM is ready. If the DOM is already loaded, the callback runs immediately.</p>
    <div class="exports">Available as: <code>hyperclay.onDomReady</code></div>
    <div class="signature"><code>onDomReady(callback)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Function to execute when DOM is ready</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">void</code></p>
    <h4>Example</h4><div class="example"><pre>// Initialize app when DOM is ready
onDomReady(() =&gt; {
  initializeApp();
  setupEventListeners();
});

// Safe to call after page load - runs immediately
onDomReady(() =&gt; {
  console.log('This runs right away if DOM is already loaded');
});</pre></div>
  </div><div class="function-card" id="fn-onLoad">
    <h3>onLoad</h3>
    <p class="function-description">Execute a callback when the window load event fires (all resources loaded). If already loaded, the callback runs immediately.</p>
    <div class="exports">Available as: <code>hyperclay.onLoad</code></div>
    <div class="signature"><code>onLoad(callback)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Function to execute when window is fully loaded</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">void</code></p>
    <h4>Example</h4><div class="example"><pre>// Wait for all images and resources to load
onLoad(() =&gt; {
  initializeImageGallery();
  calculateLayoutDimensions();
});

// Difference from onDomReady:
// - onDomReady: DOM structure ready, images may still be loading
// - onLoad: Everything loaded including images, fonts, iframes</pre></div>
  </div><div class="function-card" id="fn-dom-helpers">
    <h3>dom-helpers</h3>
    <p class="function-description">Adds convenience methods to all HTML elements for finding and manipulating nearby elements. Built on top of the `nearest` utility.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>el.cycle(order, attr)</code></td>
          <td>Replace element with next element having same attribute</td>
        </tr>
      
        <tr>
          <td><code>el.cycleAttr(order, setAttr, lookupAttr?)</code></td>
          <td>Cycle through attribute values</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Find nearest element with [project] or .project
const projectEl = this.nearest.project;

// Get/set values (smart: uses .value for form elements, attribute otherwise)
const projectName = this.val.project;
this.val.project = &quot;New Name&quot;;

// Get/set innerText
const label = this.text.title;
this.text.title = &quot;Updated Title&quot;;

// Execute code from an attribute
// If &lt;div sync_out=&quot;savePage()&quot;&gt; exists nearby, this runs savePage()
this.exec.sync_out();

// Cycle through elements
// Replaces current element with next element having [variant] attribute
this.cycle(1, 'variant');   // forward
this.cycle(-1, 'variant');  // backward

// Cycle through attribute values
// Sets theme to next value found on any [theme] element
this.cycleAttr(1, 'theme');

// Cycle with different lookup attribute
// Sets color based on values from [option:color] elements
this.cycleAttr(1, 'color', 'option:color');</pre></div>
  </div></div><div class="category-section" id="cat-string">
      <h2>String Utilities</h2><div class="function-card" id="fn-slugify">
    <h3>slugify</h3>
    <p class="function-description">Convert text into a URL-friendly slug. Handles accents, spaces, and special characters.</p>
    <div class="exports">Available as: <code>window.slugify</code>, <code>hyperclay.slugify</code></div>
    <div class="signature"><code>slugify(text)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>text</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The text to convert to a slug</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">string</code> — URL-friendly slug</p>
    <h4>Example</h4><div class="example"><pre>slugify('Hello World');
// 'hello-world'

slugify('Café &amp; Restaurant');
// 'cafe-restaurant'

slugify('  Multiple   Spaces  ');
// 'multiple-spaces'

slugify('Ñoño with Accénts');
// 'nono-with-accents'

// Use for URLs
const title = 'My Blog Post Title!';
const url = `/posts/${slugify(title)}`;
// '/posts/my-blog-post-title'</pre></div>
  </div><div class="function-card" id="fn-copyToClipboard">
    <h3>copyToClipboard</h3>
    <p class="function-description">Copy text to the system clipboard.</p>
    <div class="exports">Available as: <code>hyperclay.copyToClipboard</code></div>
    <div class="signature"><code>copyToClipboard(text)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>text</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>The text to copy to clipboard</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">void</code></p>
    <h4>Example</h4><div class="example"><pre>// Copy a URL
copyToClipboard('https://example.com/share/123');

// Copy with user feedback
copyToClipboard(embedCode);
toast('Copied to clipboard!');

// Copy from an element
const code = document.querySelector('pre').textContent;
copyToClipboard(code);</pre></div>
  </div><div class="function-card" id="fn-query">
    <h3>query</h3>
    <p class="function-description">An object containing parsed URL query parameters from the current page URL.</p>
    <div class="exports">Available as: <code>window.query</code>, <code>hyperclay.query</code></div>
    <div class="signature"><code>query</code></div>
    
    
    
    <h4>Example</h4><div class="example"><pre>// URL: https://example.com/page?name=john&amp;page=2&amp;active=true

query.name;    // 'john'
query.page;    // '2'
query.active;  // 'true'

// Check if parameter exists
if (query.debug) {
  enableDebugMode();
}

// Use with defaults
const page = query.page || '1';
const sort = query.sort || 'date';

// Destructure parameters
const { name, page, sort = 'date' } = query;</pre></div>
  </div></div><div class="category-section" id="cat-utilities">
      <h2>Utilities</h2><div class="function-card" id="fn-throttle">
    <h3>throttle</h3>
    <p class="function-description">Limit how often a function can be called. The function executes at most once per specified delay period.</p>
    <div class="exports">Available as: <code>hyperclay.throttle</code></div>
    <div class="signature"><code>throttle(callback, delay, executeFirst)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>The function to throttle</td>
        </tr>
      
        <tr>
          <td><code>delay</code></td>
          <td><code>number</code></td>
          <td>—</td>
          <td>Minimum time between calls in milliseconds</td>
        </tr>
      
        <tr>
          <td><code>executeFirst</code></td>
          <td><code>boolean</code></td>
          <td><code>`true`</code></td>
          <td>Execute immediately on first call</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">function</code> — Throttled version of the callback</p>
    <h4>Example</h4><div class="example"><pre>// Throttle scroll handler to once per 100ms
const handleScroll = throttle(() =&gt; {
  updateScrollPosition();
}, 100);

window.addEventListener('scroll', handleScroll);

// Throttle resize handler
const handleResize = throttle(() =&gt; {
  recalculateLayout();
}, 200);

window.addEventListener('resize', handleResize);

// Don't execute immediately on first call
const lazyUpdate = throttle(updateUI, 500, false);</pre></div>
  </div><div class="function-card" id="fn-debounce">
    <h3>debounce</h3>
    <p class="function-description">Delay function execution until after a period of inactivity. The timer resets each time the function is called.</p>
    <div class="exports">Available as: <code>hyperclay.debounce</code></div>
    <div class="signature"><code>debounce(callback, delay)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>The function to debounce</td>
        </tr>
      
        <tr>
          <td><code>delay</code></td>
          <td><code>number</code></td>
          <td>—</td>
          <td>Wait time in milliseconds after last call</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">function</code> — Debounced version of the callback</p>
    <h4>Example</h4><div class="example"><pre>// Debounce search input
const searchInput = document.querySelector('#search');
const handleSearch = debounce((query) =&gt; {
  fetchSearchResults(query);
}, 300);

searchInput.addEventListener('input', (e) =&gt; {
  handleSearch(e.target.value);
});

// Debounce window resize
const handleResize = debounce(() =&gt; {
  recalculateLayout();
}, 250);

window.addEventListener('resize', handleResize);

// Auto-save after user stops typing
const autoSave = debounce(() =&gt; {
  saveDraft();
}, 1000);</pre></div>
  </div><div class="function-card" id="fn-cacheBust">
    <h3>cacheBust</h3>
    <p class="function-description">Cache-bust an element's href or src attribute by adding or updating a version query parameter. Useful for reloading stylesheets or scripts after dynamic changes.</p>
    <div class="exports">Available as: <code>window.cacheBust</code>, <code>hyperclay.cacheBust</code></div>
    <div class="signature"><code>cacheBust(element)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>element</code></td>
          <td><code>HTMLElement</code></td>
          <td>—</td>
          <td>Element with href or src attribute to cache-bust</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">void</code></p>
    <h4>Example</h4><div class="example"><pre>// Cache-bust a stylesheet link
const link = document.querySelector('link[rel=&quot;stylesheet&quot;]');
cacheBust(link);
// href=&quot;/styles.css&quot; becomes &quot;/styles.css?v=1702847291234&quot;

// Cache-bust an image
const img = document.querySelector('img');
cacheBust(img);
// src=&quot;/photo.jpg?v=123&quot; becomes &quot;/photo.jpg?v=1702847291234&quot;

// Use with onaftersave to reload Tailwind CSS after save
// &lt;link href=&quot;/tailwindcss/mysite.css&quot; onaftersave=&quot;cacheBust(this)&quot;&gt;</pre></div>
  </div><div class="function-card" id="fn-cookie">
    <h3>cookie</h3>
    <p class="function-description">Utility object for reading and removing browser cookies.</p>
    <div class="exports">Available as: <code>window.cookie</code>, <code>hyperclay.cookie</code></div>
    <div class="signature"><code>cookie.get(name)
cookie.remove(name)</code></div>
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>get(name)</code></td>
          <td>Get cookie value. Returns parsed JSON if valid, otherwise decoded string, or `null` if not found.</td>
        </tr>
      
        <tr>
          <td><code>remove(name)</code></td>
          <td>Remove cookie from current path, host domain, and apex domain.</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Get a cookie value
const userId = cookie.get('userId');

// Get JSON cookie (auto-parsed)
const preferences = cookie.get('userPrefs');
// { theme: 'dark', lang: 'en' }

// Check if cookie exists
if (cookie.get('authToken')) {
  showLoggedInUI();
}

// Remove a cookie
cookie.remove('sessionId');

// Clear authentication
cookie.remove('authToken');
cookie.remove('userId');</pre></div>
  </div><div class="function-card" id="fn-Mutation">
    <h3>Mutation</h3>
    <p class="function-description">A lightweight wrapper around MutationObserver for watching DOM changes. Provides methods to observe element additions, removals, and attribute changes.</p>
    <div class="exports">Available as: <code>window.Mutation</code>, <code>hyperclay.Mutation</code></div>
    <div class="signature"><code>Mutation.onAnyChange(options, callback)
Mutation.onAddOrRemove(options, callback)
Mutation.onAddElement(options, callback)
Mutation.onRemoveElement(options, callback)
Mutation.onAttribute(options, callback)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>options</code></td>
          <td><code>object</code></td>
          <td><code>`{}`</code></td>
          <td>Configuration options</td>
        </tr>
      
        <tr>
          <td><code>options.debounce</code></td>
          <td><code>number</code></td>
          <td><code>`0`</code></td>
          <td>Debounce delay in milliseconds</td>
        </tr>
      
        <tr>
          <td><code>options.selectorFilter</code></td>
          <td><code>string|function</code></td>
          <td>—</td>
          <td>Filter changes to matching elements</td>
        </tr>
      
        <tr>
          <td><code>options.omitChangeDetails</code></td>
          <td><code>boolean</code></td>
          <td><code>`false`</code></td>
          <td>Call callback without change data</td>
        </tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Called with array of changes</td>
        </tr>
      
    </table>
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>onAnyChange</code></td>
          <td>Watch all DOM changes</td>
        </tr>
      
        <tr>
          <td><code>onAddOrRemove</code></td>
          <td>Watch element additions and removals</td>
        </tr>
      
        <tr>
          <td><code>onAddElement</code></td>
          <td>Watch only element additions</td>
        </tr>
      
        <tr>
          <td><code>onRemoveElement</code></td>
          <td>Watch only element removals</td>
        </tr>
      
        <tr>
          <td><code>onAttribute</code></td>
          <td>Watch attribute changes</td>
        </tr>
      
    </table>
    <h4>Returns</h4><p><code class="returns-type">function</code> — Call to stop observing</p>
    <h4>Example</h4><div class="example"><pre>// Watch for any DOM changes (debounced)
const unsubscribe = Mutation.onAnyChange({ debounce: 200 }, (changes) =&gt; {
  changes.forEach(change =&gt; {
    console.log(change.type, change.element);
  });
});

// Watch for new elements matching a selector
Mutation.onAddElement({ selectorFilter: '.card' }, (changes) =&gt; {
  changes.forEach(({ element }) =&gt; {
    initializeCard(element);
  });
});

// Watch for attribute changes
Mutation.onAttribute({ debounce: 100 }, (changes) =&gt; {
  changes.forEach(({ element, attribute, oldValue, newValue }) =&gt; {
    console.log(`${attribute} changed from ${oldValue} to ${newValue}`);
  });
});

// Simple debounced callback without change details
Mutation.onAnyChange({ debounce: 500, omitChangeDetails: true }, () =&gt; {
  console.log('DOM changed');
});

// Stop observing
unsubscribe();</pre></div>
  </div><div class="function-card" id="fn-nearest">
    <h3>nearest</h3>
    <p class="function-description">Search for elements matching a CSS selector by exploring outward from a starting point. Unlike `element.closest()` which only searches ancestors, this explores siblings, cousins, and nearby elements in visual proximity.</p>
    <div class="exports">Available as: <code>window.nearest</code>, <code>hyperclay.nearest</code></div>
    <div class="signature"><code>nearest(startElem, selector, elementFoundReturnValue)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>startElem</code></td>
          <td><code>Element</code></td>
          <td>—</td>
          <td>Starting element for the search</td>
        </tr>
      
        <tr>
          <td><code>selector</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>CSS selector to match</td>
        </tr>
      
        <tr>
          <td><code>elementFoundReturnValue</code></td>
          <td><code>function</code></td>
          <td><code>`x =&gt; x`</code></td>
          <td>Transform function for the found element</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Element | any | null</code> — Found element (or transformed value), or `null` if not found</p>
    <h4>Example</h4><div class="example"><pre>// Find the nearest button
const btn = nearest(clickedElement, 'button');

// Find nearest input field from a label
const input = nearest(label, 'input');

// Find nearest and get its value
const value = nearest(el, '[data-value]', el =&gt; el.dataset.value);

// Find related UI elements
const card = nearest(deleteBtn, '.card');
card.remove();

// Find next input in reading order
const nextInput = nearest(currentInput, 'input:not(:disabled)');
nextInput?.focus();</pre></div>
  </div></div><div class="category-section" id="cat-communication">
      <h2>Communication</h2><div class="function-card" id="fn-sendMessage">
    <h3>sendMessage</h3>
    <p class="function-description">Send form data or a custom object to the `/message` endpoint. Automatically collects form data, includes behavior tracking, and handles success/error toasts.</p>
    <div class="exports">Available as: <code>hyperclay.sendMessage</code></div>
    <div class="signature"><code>sendMessage(eventOrObj, successMessage, callback)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>eventOrObj</code></td>
          <td><code>Event|object</code></td>
          <td>—</td>
          <td>Form submit event, click event, or data object to send</td>
        </tr>
      
        <tr>
          <td><code>successMessage</code></td>
          <td><code>string</code></td>
          <td><code>`'Successfully sent'`</code></td>
          <td>Toast message on success</td>
        </tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td>—</td>
          <td>Called with response data on success</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;object&gt;</code> — Resolves with server response, rejects on error</p>
    <h4>Example</h4><div class="example"><pre>// Handle form submission
document.querySelector('form').onsubmit = (e) =&gt; {
  sendMessage(e, 'Message sent!');
};

// Event outside a form (sends behavior data only)
document.querySelector('#contact-btn').onclick = (e) =&gt; {
  sendMessage(e, 'Contact request sent!');
};

// Send custom data object
sendMessage({
  name: 'John',
  email: 'john@example.com'
}, 'Contact form submitted');

// With async/await
try {
  const result = await sendMessage(formEvent);
  redirectToThankYou();
} catch (error) {
  console.error('Failed:', error);
}</pre></div>
  </div><div class="function-card" id="fn-uploadFile">
    <h3>uploadFile</h3>
    <p class="function-description">Upload a file to the `/upload` endpoint with progress toasts and automatic clipboard copy of the resulting URL.</p>
    <div class="exports">Available as: <code>hyperclay.uploadFile</code></div>
    <div class="signature"><code>uploadFile(eventOrFile, callback, extraData)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>eventOrFile</code></td>
          <td><code>Event|File</code></td>
          <td>—</td>
          <td>File input change event or File object</td>
        </tr>
      
        <tr>
          <td><code>callback</code></td>
          <td><code>function</code></td>
          <td><code>`() =&gt; {}`</code></td>
          <td>Called with response on success</td>
        </tr>
      
        <tr>
          <td><code>extraData</code></td>
          <td><code>object</code></td>
          <td><code>`{}`</code></td>
          <td>Additional data to include in the request</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;object&gt;</code> — Resolves with server response containing URLs</p>
    <h4>Example</h4><div class="example"><pre>// Handle file input
document.querySelector('input[type=&quot;file&quot;]').onchange = (e) =&gt; {
  uploadFile(e, (response) =&gt; {
    console.log('Uploaded to:', response.urls);
  });
};

// Upload a File object directly
const file = new File(['content'], 'test.txt', { type: 'text/plain' });
uploadFile(file);

// With extra metadata
uploadFile(event, null, {
  folder: 'images',
  public: true
});

// Progress is shown automatically via toasts:
// &quot;10% uploaded&quot; → &quot;50% uploaded&quot; → &quot;80% uploaded&quot; → &quot;Uploaded! URL copied&quot;</pre></div>
  </div><div class="function-card" id="fn-createFile">
    <h3>createFile</h3>
    <p class="function-description">Create and upload a file from text content. Automatically detects content type (HTML, CSS, JS, JSON, etc.) and adjusts the file extension.</p>
    <div class="exports">Available as: <code>hyperclay.createFile</code></div>
    <div class="signature"><code>createFile(eventOrData)
createFile(fileName, fileBody)</code></div>
    
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;object&gt;</code> — Resolves with server response containing URLs</p>
    <h4>Example</h4><div class="example"><pre>// From form submission
document.querySelector('#create-file-form').onsubmit = (e) =&gt; {
  createFile(e);
};

// From object
createFile({
  fileName: 'styles.css',
  fileBody: '.container { max-width: 1200px; }'
});

// From arguments
createFile('config.json', JSON.stringify({ theme: 'dark' }));

// Content type auto-detection:
// - HTML content → .html
// - CSS content → .css
// - JavaScript → .js
// - Valid JSON → .json
// - Unknown → .txt</pre></div>
  </div><div class="function-card" id="fn-uploadFileBasic">
    <h3>uploadFileBasic</h3>
    <p class="function-description">Upload a file with custom progress, completion, and error callbacks. A lower-level alternative to `uploadFile` without progress toasts (HTTP errors still trigger toast notifications).</p>
    <div class="exports">Available as: <code>hyperclay.uploadFileBasic</code></div>
    <div class="signature"><code>uploadFileBasic(eventOrFile, options)</code></div>
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>eventOrFile</code></td>
          <td><code>Event|File</code></td>
          <td>—</td>
          <td>File input change event or File object</td>
        </tr>
      
        <tr>
          <td><code>options</code></td>
          <td><code>object</code></td>
          <td><code>`{}`</code></td>
          <td>Callback options</td>
        </tr>
      
        <tr>
          <td><code>options.onProgress</code></td>
          <td><code>function</code></td>
          <td><code>`() =&gt; {}`</code></td>
          <td>Called with percent complete (0-100)</td>
        </tr>
      
        <tr>
          <td><code>options.onComplete</code></td>
          <td><code>function</code></td>
          <td><code>`() =&gt; {}`</code></td>
          <td>Called with response on success</td>
        </tr>
      
        <tr>
          <td><code>options.onError</code></td>
          <td><code>function</code></td>
          <td><code>`() =&gt; {}`</code></td>
          <td>Called with error on failure</td>
        </tr>
      
    </table>
    
    <h4>Returns</h4><p><code class="returns-type">Promise&lt;object&gt;</code> — Resolves with server response, rejects on error</p>
    <h4>Example</h4><div class="example"><pre>// With custom progress UI
uploadFileBasic(fileInput.files[0], {
  onProgress: (percent) =&gt; {
    progressBar.style.width = percent + '%';
    progressText.textContent = percent + '%';
  },
  onComplete: (response) =&gt; {
    progressBar.classList.add('complete');
    showSuccessMessage(response.urls[0]);
  },
  onError: (error) =&gt; {
    progressBar.classList.add('error');
    showErrorMessage(error.message);
  }
});

// Minimal usage
uploadFileBasic(event, {
  onComplete: (res) =&gt; console.log('Done:', res.urls)
});

// With async/await
try {
  const result = await uploadFileBasic(file, {
    onProgress: p =&gt; console.log(p + '%')
  });
  console.log('Uploaded:', result);
} catch (err) {
  console.error('Failed:', err);
}</pre></div>
  </div><div class="function-card" id="fn-live-sync">
    <h3>live-sync</h3>
    <p class="function-description">Real-time DOM sync across browsers via SSE. When one user saves, all connected browsers see the changes instantly via HyperMorph. Works with Hyperclay Local app.</p>
    
    
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>file</code></td>
          <td><code>string</code></td>
          <td>—</td>
          <td>Site identifier to sync (e.g. `'index'`, `'about'`). Auto-detected from URL pathname if omitted</td>
        </tr>
      
    </table>
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>liveSync.start(file?)</code></td>
          <td>Start syncing. Auto-detects file from URL if not provided</td>
        </tr>
      
        <tr>
          <td><code>liveSync.stop()</code></td>
          <td>Stop syncing and clean up SSE connection</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Auto-start (default behavior when module is loaded)
await import('hyperclay.js?features=live-sync');

// Manual control
import liveSync from 'hyperclay.js/live-sync';
liveSync.start('my-page');

// Callbacks
liveSync.onConnect = () =&gt; console.log('Connected');
liveSync.onDisconnect = () =&gt; console.log('Disconnected');
liveSync.onUpdate = ({ html, sender }) =&gt; console.log('Update from', sender);
liveSync.onError = (err) =&gt; console.error(err);

// Stop syncing
liveSync.stop();</pre></div>
  </div></div><div class="category-section" id="cat-events">
      <h2>Event Attributes</h2><div class="function-card" id="fn-onclickaway">
    <h3>onclickaway</h3>
    <p class="function-description">Execute code when a click occurs outside the element.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Close dropdown when clicking outside --&gt;
&lt;div class=&quot;dropdown&quot; onclickaway=&quot;this.classList.add('hidden')&quot;&gt;
  &lt;button&gt;Menu&lt;/button&gt;
  &lt;ul class=&quot;dropdown-items&quot;&gt;
    &lt;li&gt;Option 1&lt;/li&gt;
    &lt;li&gt;Option 2&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;!-- Close modal when clicking backdrop --&gt;
&lt;div class=&quot;modal-backdrop&quot; onclickaway=&quot;All.modal.remove()&quot;&gt;
  &lt;div class=&quot;modal&quot;&gt;Modal content&lt;/div&gt;
&lt;/div&gt;</pre></div>
  </div><div class="function-card" id="fn-onclickchildren">
    <h3>onclickchildren</h3>
    <p class="function-description">Execute code when any direct child of the element is clicked.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Hide menu when any menu item is clicked --&gt;
&lt;div menu class=&quot;dropdown&quot; onclickchildren=&quot;All.menu.classList.add('hidden')&quot;&gt;
  &lt;button&gt;Option 1&lt;/button&gt;
  &lt;button&gt;Option 2&lt;/button&gt;
  &lt;button&gt;Option 3&lt;/button&gt;
&lt;/div&gt;

&lt;!-- Handle click on list items, even with nested content --&gt;
&lt;ul onclickchildren=&quot;console.log('Clicked:', this.dataset.id)&quot;&gt;
  &lt;li data-id=&quot;1&quot;&gt;&lt;span&gt;Item 1&lt;/span&gt;&lt;/li&gt;
  &lt;li data-id=&quot;2&quot;&gt;&lt;span&gt;Item 2&lt;/span&gt;&lt;/li&gt;
  &lt;li data-id=&quot;3&quot;&gt;&lt;span&gt;Item 3&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- Delegate actions based on which child was clicked --&gt;
&lt;nav onclickchildren=&quot;this.classList.add('active'); All('nav &gt; *').not(this).classList.remove('active')&quot;&gt;
  &lt;a href=&quot;#home&quot;&gt;Home&lt;/a&gt;
  &lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;
  &lt;a href=&quot;#contact&quot;&gt;Contact&lt;/a&gt;
&lt;/nav&gt;</pre></div>
  </div><div class="function-card" id="fn-onclone">
    <h3>onclone</h3>
    <p class="function-description">Execute code when an element is cloned via `cloneNode()`.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Generate unique IDs for cloned elements --&gt;
&lt;template id=&quot;item-template&quot;&gt;
  &lt;div class=&quot;item&quot; onclone=&quot;this.id = 'item-' + Date.now()&quot;&gt;
    &lt;input type=&quot;text&quot;&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- Clear input values in cloned forms --&gt;
&lt;form onclone=&quot;All('input', this).value = ''&quot;&gt;
  &lt;input type=&quot;text&quot; value=&quot;default&quot;&gt;
  &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
&lt;/form&gt;

&lt;!-- Initialize cloned components --&gt;
&lt;div class=&quot;widget&quot; onclone=&quot;this.dataset.initialized = 'false'; initWidget(this)&quot;&gt;
  Widget content
&lt;/div&gt;</pre></div>
  </div><div class="function-card" id="fn-onmutation">
    <h3>onmutation</h3>
    <p class="function-description">Execute code when the element or its descendants change.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Update count when list changes --&gt;
&lt;div onmutation=&quot;All.count.textContent = this.children.length&quot;&gt;
  &lt;ul&gt;
    &lt;li&gt;Item 1&lt;/li&gt;
    &lt;li&gt;Item 2&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;span count&gt;2&lt;/span&gt;

&lt;!-- Auto-save when content is edited --&gt;
&lt;div contenteditable onmutation=&quot;await saveContent(this.innerHTML)&quot;&gt;
  Edit this content...
&lt;/div&gt;

&lt;!-- Sync state with DOM changes --&gt;
&lt;div class=&quot;todo-list&quot; onmutation=&quot;updateTodoState(this)&quot;&gt;
  &lt;div class=&quot;todo-item&quot;&gt;Task 1&lt;/div&gt;
  &lt;div class=&quot;todo-item&quot;&gt;Task 2&lt;/div&gt;
&lt;/div&gt;</pre></div>
  </div><div class="function-card" id="fn-onpagemutation">
    <h3>onpagemutation</h3>
    <p class="function-description">Execute code when any element on the page changes. Also available as `onglobalmutation`.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Live counter that updates when items change --&gt;
&lt;span onpagemutation=&quot;this.textContent = All('li').length&quot;&gt;0&lt;/span&gt;
&lt;ul&gt;
  &lt;li&gt;Item 1&lt;/li&gt;
  &lt;li&gt;Item 2&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- Update totals when table data changes --&gt;
&lt;tfoot&gt;
  &lt;tr&gt;
    &lt;td onglobalmutation=&quot;this.textContent = calculateTotal()&quot;&gt;$0&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tfoot&gt;

&lt;!-- Sync badge count with notifications --&gt;
&lt;span class=&quot;badge&quot; onpagemutation=&quot;this.textContent = All('.notification:not(.read)').length&quot;&gt;
  0
&lt;/span&gt;</pre></div>
  </div><div class="function-card" id="fn-onrender">
    <h3>onrender</h3>
    <p class="function-description">Execute code once when an element is rendered (added to the DOM).</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Initialize a component on render --&gt;
&lt;div class=&quot;chart&quot; onrender=&quot;initChart(this)&quot;&gt;
  Loading chart...
&lt;/div&gt;

&lt;!-- Fetch and display data --&gt;
&lt;div onrender=&quot;this.innerHTML = await fetchUserProfile()&quot;&gt;
  Loading profile...
&lt;/div&gt;

&lt;!-- Set initial state --&gt;
&lt;input type=&quot;text&quot; onrender=&quot;this.value = localStorage.getItem('draft') || ''&quot;&gt;

&lt;!-- Focus first input in dynamically added forms --&gt;
&lt;form onrender=&quot;this.querySelector('input')?.focus()&quot;&gt;
  &lt;input type=&quot;text&quot; placeholder=&quot;Name&quot;&gt;
  &lt;input type=&quot;email&quot; placeholder=&quot;Email&quot;&gt;
&lt;/form&gt;

&lt;!-- Load content lazily --&gt;
&lt;div class=&quot;lazy-section&quot; onrender=&quot;
  const content = await fetch(this.dataset.src).then(r =&gt; r.text());
  this.innerHTML = content;
&quot; data-src=&quot;/partials/sidebar.html&quot;&gt;
  Loading...
&lt;/div&gt;</pre></div>
  </div></div><div class="category-section" id="cat-customAttrs">
      <h2>Custom Attributes</h2><div class="function-card" id="fn-persist">
    <h3>persist</h3>
    <p class="function-description">Sync form input values to the saved/synced page snapshot.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Text input persists its value --&gt;
&lt;input type=&quot;text&quot; persist placeholder=&quot;Your name&quot;&gt;

&lt;!-- Checkbox persists checked state --&gt;
&lt;label&gt;
  &lt;input type=&quot;checkbox&quot; persist&gt; Remember me
&lt;/label&gt;

&lt;!-- Textarea persists content --&gt;
&lt;textarea persist placeholder=&quot;Notes...&quot;&gt;&lt;/textarea&gt;

&lt;!-- Select persists selection (including multiple) --&gt;
&lt;select persist&gt;
  &lt;option value=&quot;a&quot;&gt;Option A&lt;/option&gt;
  &lt;option value=&quot;b&quot;&gt;Option B&lt;/option&gt;
&lt;/select&gt;

&lt;select multiple persist&gt;
  &lt;option value=&quot;1&quot;&gt;One&lt;/option&gt;
  &lt;option value=&quot;2&quot;&gt;Two&lt;/option&gt;
  &lt;option value=&quot;3&quot;&gt;Three&lt;/option&gt;
&lt;/select&gt;</pre></div>
  </div><div class="function-card" id="fn-onaftersave">
    <h3>onaftersave</h3>
    <p class="function-description">Execute code after a successful page save.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Cache-bust a stylesheet after save --&gt;
&lt;link href=&quot;styles.css&quot; onaftersave=&quot;cacheBust(this)&quot;&gt;

&lt;!-- Show save status --&gt;
&lt;span onaftersave=&quot;this.textContent = event.detail.msg&quot;&gt;
  Not saved
&lt;/span&gt;

&lt;!-- Update timestamp --&gt;
&lt;span onaftersave=&quot;this.textContent = new Date(event.detail.timestamp).toLocaleTimeString()&quot;&gt;
  --:--:--
&lt;/span&gt;

&lt;!-- Trigger custom logic --&gt;
&lt;div onaftersave=&quot;analytics.track('page_saved')&quot;&gt;&lt;/div&gt;

&lt;!-- Refresh preview after save --&gt;
&lt;iframe src=&quot;/preview&quot; onaftersave=&quot;this.src = this.src&quot;&gt;&lt;/iframe&gt;</pre></div>
  </div><div class="function-card" id="fn-prevent-enter">
    <h3>prevent-enter</h3>
    <p class="function-description">Prevent the Enter key from creating newlines in an element.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Single-line contenteditable heading --&gt;
&lt;h1 contenteditable prevent-enter&gt;Edit this title&lt;/h1&gt;

&lt;!-- Single-line textarea (alternative to input) --&gt;
&lt;textarea prevent-enter placeholder=&quot;Single line only&quot;&gt;&lt;/textarea&gt;

&lt;!-- Prevent Enter in a specific area --&gt;
&lt;div prevent-enter&gt;
  &lt;span contenteditable&gt;Name&lt;/span&gt;
  &lt;span contenteditable&gt;Email&lt;/span&gt;
&lt;/div&gt;</pre></div>
  </div><div class="function-card" id="fn-autosize">
    <h3>autosize</h3>
    <p class="function-description">Automatically grow textarea height to fit content.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Basic auto-growing textarea --&gt;
&lt;textarea autosize placeholder=&quot;Start typing...&quot;&gt;&lt;/textarea&gt;

&lt;!-- With minimum height via CSS --&gt;
&lt;textarea autosize style=&quot;min-height: 100px;&quot;&gt;&lt;/textarea&gt;

&lt;!-- Notes field that expands --&gt;
&lt;label&gt;
  Notes
  &lt;textarea autosize name=&quot;notes&quot;&gt;&lt;/textarea&gt;
&lt;/label&gt;</pre></div>
  </div><div class="function-card" id="fn-sortable">
    <h3>sortable</h3>
    <p class="function-description">Enable drag-and-drop sorting on child elements.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Basic sortable list --&gt;
&lt;ul sortable&gt;
  &lt;li&gt;Drag me&lt;/li&gt;
  &lt;li&gt;And me&lt;/li&gt;
  &lt;li&gt;Me too&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- With drag handle --&gt;
&lt;ul sortable&gt;
  &lt;li&gt;
    &lt;span sortable-handle&gt;⋮⋮&lt;/span&gt;
    Item with handle
  &lt;/li&gt;
  &lt;li&gt;
    &lt;span sortable-handle&gt;⋮⋮&lt;/span&gt;
    Another item
  &lt;/li&gt;
&lt;/ul&gt;

&lt;!-- Grouped lists (drag between) --&gt;
&lt;div style=&quot;display: flex; gap: 1rem;&quot;&gt;
  &lt;ul sortable=&quot;shared&quot;&gt;
    &lt;li&gt;List A - Item 1&lt;/li&gt;
    &lt;li&gt;List A - Item 2&lt;/li&gt;
  &lt;/ul&gt;
  &lt;ul sortable=&quot;shared&quot;&gt;
    &lt;li&gt;List B - Item 1&lt;/li&gt;
    &lt;li&gt;List B - Item 2&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;!-- With callbacks --&gt;
&lt;ul sortable onsorted=&quot;console.log('Reordered!'); savePage()&quot;&gt;
  &lt;li&gt;Item 1&lt;/li&gt;
  &lt;li&gt;Item 2&lt;/li&gt;
&lt;/ul&gt;

&lt;ul sortable onsorting=&quot;this.classList.add('dragging')&quot;
             onsorted=&quot;this.classList.remove('dragging')&quot;&gt;
  &lt;li&gt;Item 1&lt;/li&gt;
  &lt;li&gt;Item 2&lt;/li&gt;
&lt;/ul&gt;</pre></div>
  </div><div class="function-card" id="fn-option-visibility">
    <h3>option-visibility</h3>
    <p class="function-description">Show or hide elements based on ancestor attribute values.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Show/hide based on edit mode --&gt;
&lt;html editmode=&quot;true&quot;&gt;
  &lt;body&gt;
    &lt;button option:editmode=&quot;true&quot;&gt;Edit&lt;/button&gt;   &lt;!-- visible --&gt;
    &lt;button option:editmode=&quot;false&quot;&gt;View&lt;/button&gt;  &lt;!-- hidden --&gt;
  &lt;/body&gt;
&lt;/html&gt;

&lt;!-- Theme-based visibility --&gt;
&lt;html theme=&quot;dark&quot;&gt;
  &lt;img option:theme=&quot;light&quot; src=&quot;logo-dark.png&quot;&gt;   &lt;!-- hidden --&gt;
  &lt;img option:theme=&quot;dark&quot; src=&quot;logo-light.png&quot;&gt;   &lt;!-- visible --&gt;
&lt;/html&gt;

&lt;!-- Role-based UI --&gt;
&lt;div role=&quot;admin&quot;&gt;
  &lt;button option:role=&quot;admin&quot;&gt;Delete All&lt;/button&gt;  &lt;!-- visible --&gt;
  &lt;button option:role=&quot;user&quot;&gt;My Items&lt;/button&gt;     &lt;!-- hidden --&gt;
&lt;/div&gt;

&lt;!-- Nested contexts --&gt;
&lt;div editmode=&quot;true&quot;&gt;
  &lt;div editmode=&quot;false&quot;&gt;
    &lt;span option:editmode=&quot;true&quot;&gt;A&lt;/span&gt;   &lt;!-- hidden (nearest ancestor is false) --&gt;
    &lt;span option:editmode=&quot;false&quot;&gt;B&lt;/span&gt;  &lt;!-- visible --&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre></div>
  </div></div><div class="category-section" id="cat-saveEdit">
      <h2>Save/Edit Features</h2><div class="function-card" id="fn-edit-mode">
    <h3>edit-mode</h3>
    <p class="function-description">Provides edit mode detection and toggling for page editing.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>toggleEditMode()</code></td>
          <td>Toggle edit mode on/off (reloads page)</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Check if in edit mode
if (hyperclay.isEditMode) {
  // Show edit UI
}

// Check if user owns the resource
if (hyperclay.isOwner) {
  // Show owner-only controls
}

// Toggle edit mode (reloads page with ?editmode=true/false)
hyperclay.toggleEditMode();</pre></div>
  </div><div class="function-card" id="fn-edit-mode-helpers">
    <h3>edit-mode-helpers</h3>
    <p class="function-description">Sets `editmode` and `pageowner` attributes on `&lt;html&gt;` for CSS-based conditional styling.</p>
    
    
    
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- In edit mode as owner --&gt;
&lt;html editmode=&quot;true&quot; pageowner=&quot;true&quot;&gt;
  ...
&lt;/html&gt;

&lt;!-- Viewing as non-owner --&gt;
&lt;html editmode=&quot;false&quot; pageowner=&quot;false&quot;&gt;
  ...
&lt;/html&gt;</pre></div>
  </div><div class="function-card" id="fn-save-system">
    <h3>save-system</h3>
    <p class="function-description">Manual save with change detection, state management, keyboard shortcuts, and save button support.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>savePage(callback?)</code></td>
          <td>Save page if content changed</td>
        </tr>
      
        <tr>
          <td><code>savePageThrottled(callback?)</code></td>
          <td>Throttled save for auto-save use</td>
        </tr>
      
        <tr>
          <td><code>replacePageWith(url)</code></td>
          <td>Fetch HTML from URL and save it</td>
        </tr>
      
        <tr>
          <td><code>beforeSave(fn)</code></td>
          <td>Register a hook to modify content before saving</td>
        </tr>
      
        <tr>
          <td><code>getPageContents()</code></td>
          <td>Get current page HTML as string</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>// Manual save
hyperclay.savePage();

// Save with callback
hyperclay.savePage(({msg, msgType}) =&gt; {
  if (msgType === 'error') {
    console.error('Save failed:', msg);
  }
});

// Register before-save hook
hyperclay.beforeSave((clone) =&gt; {
  // Modify the snapshot clone before saving
  clone.querySelectorAll('.temp').forEach(el =&gt; el.remove());
});

// Replace page with template
hyperclay.replacePageWith('/templates/blog.html');</pre></div>
  </div><div class="function-card" id="fn-save-toast">
    <h3>save-toast</h3>
    <p class="function-description">Shows toast notifications for save lifecycle events. No configuration needed.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>hyperclay:save-saved</code></td>
          <td>Green success toast with &quot;Saved&quot;</td>
        </tr>
      
        <tr>
          <td><code>hyperclay:save-error</code></td>
          <td>Red error toast with &quot;Failed to save&quot;</td>
        </tr>
      
        <tr>
          <td><code>hyperclay:save-offline</code></td>
          <td>Red error toast with &quot;No internet connection&quot;</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Basic setup --&gt;
&lt;script src=&quot;hyperclay.js?save-system,save-toast&quot;&gt;&lt;/script&gt;

&lt;!-- Full save stack with auto-save and notifications --&gt;
&lt;script src=&quot;hyperclay.js?save-system,autosave,save-toast&quot;&gt;&lt;/script&gt;</pre></div>
  </div><div class="function-card" id="fn-unsaved-warning">
    <h3>unsaved-warning</h3>
    <p class="function-description">Warns users before leaving the page if there are unsaved changes. On `beforeunload`, compares current page content to last saved content and shows the browser's native dialog if different.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>beforeunload</code></td>
          <td>Fires automatically when user tries to leave with unsaved changes</td>
        </tr>
      
        <tr>
          <td><code>getPageContents()</code></td>
          <td>Used internally to compare current vs saved state</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Basic setup --&gt;
&lt;script src=&quot;hyperclay.js?save-system,unsaved-warning&quot;&gt;&lt;/script&gt;

&lt;!-- Full save stack --&gt;
&lt;script src=&quot;hyperclay.js?save-system,autosave,unsaved-warning,save-toast&quot;&gt;&lt;/script&gt;</pre></div>
  </div><div class="function-card" id="fn-autosave">
    <h3>autosave</h3>
    <p class="function-description">Automatically saves the page when DOM changes are detected. Debounces at 3.3s after last change, throttles saves to max once per 1.2s. Only saves if content actually changed.</p>
    
    
    
    <h4>Methods</h4>
    <table class="params-table">
      <tr><th>Method</th><th>Description</th></tr>
      
        <tr>
          <td><code>MutationObserver</code></td>
          <td>Watches for any DOM mutations automatically</td>
        </tr>
      
        <tr>
          <td><code>savePageThrottled()</code></td>
          <td>Called internally after debounce completes</td>
        </tr>
      
    </table>
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Basic auto-save --&gt;
&lt;script src=&quot;hyperclay.js?save-system,autosave&quot;&gt;&lt;/script&gt;

&lt;!-- With toast notifications --&gt;
&lt;script src=&quot;hyperclay.js?save-system,autosave,save-toast&quot;&gt;&lt;/script&gt;

&lt;!-- Full save stack --&gt;
&lt;script src=&quot;hyperclay.js?save-system,autosave,unsaved-warning,save-toast&quot;&gt;&lt;/script&gt;</pre></div>
  </div><div class="function-card" id="fn-tailwind-inject">
    <h3>tailwind-inject</h3>
    <p class="function-description">Injects a Tailwind CSS stylesheet for the current resource and cache-busts it on every save. Edit-mode only.</p>
    
    
    <h4>Parameters</h4>
    <table class="params-table">
      <tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr>
      
        <tr>
          <td><code>currentResource</code></td>
          <td><code>cookie</code></td>
          <td>—</td>
          <td>Read from `currentResource` cookie. Determines the CSS path: `/tailwindcss/{currentResource}.css`</td>
        </tr>
      
    </table>
    
    
    <h4>Example</h4><div class="example"><pre>&lt;!-- Include with other save features --&gt;
&lt;script type=&quot;module&quot;&gt;
  await import('hyperclay.js?features=tailwind-inject,save-system');
&lt;/script&gt;

&lt;!-- Or use the everything preset --&gt;
&lt;script type=&quot;module&quot;&gt;
  await import('hyperclay.js?preset=everything');
&lt;/script&gt;</pre></div>
  </div></div>
    </main>
  </div>
  <script>
    function toggleSidebar() {
      document.querySelector('.sidebar').classList.toggle('open');
      document.querySelector('.sidebar-overlay').classList.toggle('open');
    }
    function closeSidebar() {
      document.querySelector('.sidebar').classList.remove('open');
      document.querySelector('.sidebar-overlay').classList.remove('open');
    }
    document.querySelectorAll('.sidebar a').forEach(link => {
      link.addEventListener('click', closeSidebar);
    });

    // Emulate sticky sidebar
    (function() {
      var sidebar = document.querySelector('.sidebar');
      var sidebarCol = document.querySelector('.sidebar-col');
      if (!sidebar || !sidebarCol) return;

      function update() {
        if (window.innerWidth <= 768) {
          sidebar.classList.remove('is-stuck');
          sidebar.style.maxHeight = '';
          return;
        }
        var colTop = sidebarCol.getBoundingClientRect().top;
        if (colTop <= 0) {
          sidebar.classList.add('is-stuck');
          sidebar.style.maxHeight = '100vh';
        } else {
          sidebar.classList.remove('is-stuck');
          sidebar.style.maxHeight = (window.innerHeight - colTop) + 'px';
        }
      }

      window.addEventListener('scroll', update, { passive: true });
      window.addEventListener('resize', update);
      update();
    })();
  </script>
</body>
</html>